(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();class a{constructor(){this.money=0,this.clickValue=1,this.autoClickValue=0,this.incomePerSecond=0,this.initElements(),this.bindEvents(),this.startAutoClicker(),this.updateDisplay()}initElements(){this.moneyDisplay=document.getElementById("money-amount"),this.incomeDisplay=document.getElementById("income-amount"),this.planetEarth=document.getElementById("planet-earth"),this.settingsBtn=document.getElementById("settings-btn"),this.mapBtn=document.getElementById("map-btn"),this.shopBtn=document.getElementById("shop-btn"),this.friendsBtn=document.getElementById("friends-btn")}bindEvents(){this.planetEarth.addEventListener("click",t=>this.clickPlanet(t)),this.settingsBtn.addEventListener("click",()=>this.openSettings()),this.mapBtn.addEventListener("click",()=>this.openMap()),this.shopBtn.addEventListener("click",()=>this.openShop()),this.friendsBtn.addEventListener("click",()=>this.openFriends()),document.getElementById("buy-click").addEventListener("click",()=>this.buyUpgrade("click")),document.getElementById("buy-auto").addEventListener("click",()=>this.buyUpgrade("auto"));const e=document.getElementById("buy-mars"),i=document.getElementById("buy-saturn");e&&e.addEventListener("click",()=>this.buyUpgrade("mars")),i&&i.addEventListener("click",()=>this.buyUpgrade("saturn"))}clickPlanet(e){this.money+=this.clickValue,this.updateDisplay(),this.planetEarth.classList.add("planet-clicked"),setTimeout(()=>{this.planetEarth.classList.remove("planet-clicked")},200),this.showMoneyPopup(e,this.clickValue)}showMoneyPopup(e,i){const t=document.createElement("div");t.className="money-popup",t.textContent=`+${i}`;const s=this.planetEarth.getBoundingClientRect(),n=e.clientX-s.left,o=e.clientY-s.top;t.style.left=n+"px",t.style.top=o+"px",t.style.position="absolute",this.planetEarth.appendChild(t),setTimeout(()=>{t.remove()},1e3)}startAutoClicker(){setInterval(()=>{this.autoClickValue>0&&(this.money+=this.autoClickValue,this.updateDisplay())},1e3)}updateDisplay(){this.moneyDisplay.textContent=this.formatNumber(this.money),this.incomeDisplay.textContent=this.formatNumber(this.incomePerSecond)}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}openSettings(){this.showPanel("settings-panel")}openMap(){this.showPanel("map-panel")}openShop(){this.showPanel("shop-panel")}openFriends(){this.showPanel("friends-panel")}showPanel(e){const i=document.getElementById("overlay"),t=document.getElementById(e);i.classList.add("active"),t.classList.add("panel-visible"),i.onclick=()=>this.hideAllPanels();const s=t.querySelector(".close-btn");s.onclick=()=>this.hideAllPanels()}hideAllPanels(){const e=document.getElementById("overlay"),i=document.querySelectorAll(".settings-panel, .map-panel, .shop-panel, .friends-panel");e.classList.remove("active"),i.forEach(t=>t.classList.remove("panel-visible"))}buyUpgrade(e){if(e==="click"&&this.money>=10)this.money-=10,this.clickValue+=1,this.updateDisplay();else if(e==="auto"&&this.money>=50)this.money-=50,this.autoClickValue+=1,this.incomePerSecond=this.autoClickValue,this.updateDisplay();else if(e==="mars"&&this.money>=1e3){this.money-=1e3;const i=document.querySelector(".map-item.locked .planet-image.mars-planet");if(i){i.closest(".map-item").classList.remove("locked");const t=i.closest(".map-item").querySelector(".map-status");t&&(t.textContent="Доступна",t.classList.remove("locked"),t.classList.add("active"))}this.updateDisplay()}else if(e==="saturn"&&this.money>=5e3){this.money-=5e3;const i=document.querySelector(".map-item.locked .planet-image.saturn-planet");if(i){i.closest(".map-item").classList.remove("locked");const t=i.closest(".map-item").querySelector(".map-status");t&&(t.textContent="Доступна",t.classList.remove("locked"),t.classList.add("active"))}this.updateDisplay()}}}document.addEventListener("DOMContentLoaded",()=>{new a});
