(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();class o{constructor(){this.money=0,this.clickValue=1,this.autoClickValue=0,this.incomePerSecond=0,this.currentPlanet="earth",this.initElements(),this.bindEvents(),this.startAutoClicker(),this.updateDisplay()}initElements(){this.moneyDisplay=document.getElementById("money-amount"),this.incomeDisplay=document.getElementById("income-amount"),this.planetEarth=document.getElementById("planet-earth"),this.settingsBtn=document.getElementById("settings-btn"),this.mapBtn=document.getElementById("map-btn"),this.shopBtn=document.getElementById("shop-btn"),this.friendsBtn=document.getElementById("friends-btn")}bindEvents(){this.planetEarth.addEventListener("click",e=>this.clickPlanet(e)),this.settingsBtn.addEventListener("click",()=>this.openSettings()),this.mapBtn.addEventListener("click",()=>this.openMap()),this.shopBtn.addEventListener("click",()=>this.openShop()),this.friendsBtn.addEventListener("click",()=>this.openFriends()),document.getElementById("buy-click").addEventListener("click",()=>this.buyUpgrade("click")),document.getElementById("buy-auto").addEventListener("click",()=>this.buyUpgrade("auto")),this.bindMapPlanetEvents()}bindMapPlanetEvents(){document.querySelectorAll(".map-item.locked").forEach(t=>{t.addEventListener("click",s=>{if(s.target.closest(".close-btn"))return;const n=t.dataset.planet,i=parseInt(t.dataset.price);n&&!isNaN(i)&&this.buyPlanetFromMap(n,i)})})}clickPlanet(e){this.money+=this.clickValue,this.updateDisplay();const t=document.createElement("div");t.className="click-effect",t.style.position="absolute",t.style.borderRadius="50%",t.style.border="2px solid rgba(255, 255, 255, 0.7)",t.style.pointerEvents="none",t.style.transform="translate(-50%, -50%)",t.style.animation="click-ripple 0.6s linear";const s=this.planetEarth.getBoundingClientRect(),n=e.clientX-s.left,i=e.clientY-s.top;t.style.left=n+"px",t.style.top=i+"px",this.planetEarth.appendChild(t),setTimeout(()=>{t.remove()},600),this.showMoneyPopup(e,this.clickValue)}showMoneyPopup(e,t){const s=document.createElement("div");s.className="money-popup",s.textContent=`+${t}`;const n=this.planetEarth.getBoundingClientRect(),i=e.clientX-n.left,a=e.clientY-n.top;s.style.left=i+"px",s.style.top=a+"px",s.style.position="absolute",this.planetEarth.appendChild(s),setTimeout(()=>{s.remove()},1e3)}changePlanet(e){this.currentPlanet=e;const t=this.planetEarth.querySelector(".planet-surface");t&&(t.style.backgroundImage=`url('/Plantes/Sun System/${this.capitalizeFirstLetter(e)}.png')`);const s=this.planetEarth.querySelector(".planet-glow");if(s)switch(e){case"mars":s.style.background="radial-gradient(circle, rgba(255, 100, 100, 0.3) 0%, transparent 70%)";break;case"jupiter":s.style.background="radial-gradient(circle, rgba(255, 150, 50, 0.3) 0%, transparent 70%)";break;case"sun":s.style.background="radial-gradient(circle, rgba(255, 200, 0, 0.5) 0%, transparent 70%)";break;case"earth":default:s.style.background="radial-gradient(circle, rgba(74, 144, 226, 0.3) 0%, transparent 70%)";break}}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}startAutoClicker(){setInterval(()=>{this.autoClickValue>0&&(this.money+=this.autoClickValue,this.updateDisplay())},1e3)}updateDisplay(){this.moneyDisplay.textContent=this.formatNumber(this.money),this.incomeDisplay.textContent=this.formatNumber(this.incomePerSecond)}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}openSettings(){this.showPanel("settings-panel")}openMap(){this.showPanel("map-panel")}openShop(){this.showPanel("shop-panel")}openFriends(){this.showPanel("friends-panel")}showPanel(e){const t=document.getElementById("overlay"),s=document.getElementById(e);t.classList.add("active"),s.classList.add("panel-visible"),t.onclick=()=>this.hideAllPanels();const n=s.querySelector(".close-btn");n.onclick=()=>this.hideAllPanels(),e==="map-panel"&&this.bindMapPlanetEvents()}hideAllPanels(){const e=document.getElementById("overlay"),t=document.querySelectorAll(".settings-panel, .map-panel, .shop-panel, .friends-panel");e.classList.remove("active"),t.forEach(s=>s.classList.remove("panel-visible"))}buyUpgrade(e){e==="click"&&this.money>=10?(this.money-=10,this.clickValue+=1,this.updateDisplay()):e==="auto"&&this.money>=50?(this.money-=50,this.autoClickValue+=1,this.incomePerSecond=this.autoClickValue,this.updateDisplay()):console.log(`Purchase failed for ${e}. Money: ${this.money}`)}buyPlanetFromMap(e,t){if(this.money>=t){this.money-=t;const s=document.querySelector(`.map-item.locked[data-planet="${e}"]`);if(s){s.classList.remove("locked");const n=s.querySelector(".map-status");n&&(n.textContent="Доступна",n.classList.remove("locked"),n.classList.add("active"))}this.changePlanet(e),this.updateDisplay()}else console.log(`Not enough money to buy ${e}. Need: ${t}, Have: ${this.money}`)}}document.addEventListener("DOMContentLoaded",()=>{new o});
