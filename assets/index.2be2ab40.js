(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class c{constructor(){this.money=0,this.clickValue=1,this.autoClickValue=0,this.incomePerSecond=0,this.currentPlanet="earth",this.soundEnabled=!0,this.musicEnabled=!0,this.initAudio(),this.initElements(),this.bindEvents(),this.initTabs(),this.startAutoClicker(),this.updateDisplay()}initElements(){this.moneyDisplay=document.getElementById("money-amount"),this.incomeDisplay=document.getElementById("income-amount"),this.planetEarth=document.getElementById("planet-earth"),this.settingsBtn=document.getElementById("settings-btn"),this.mapBtn=document.getElementById("map-btn"),this.shopBtn=document.getElementById("shop-btn"),this.friendsBtn=document.getElementById("friends-btn")}initTabs(){const e=document.querySelectorAll(".shop-tab");e.forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.tab;e.forEach(a=>a.classList.remove("active")),t.classList.add("active"),document.querySelectorAll(".shop-tab-content").forEach(a=>a.classList.remove("active"));const o=document.getElementById(`${s}-tab`);o&&o.classList.add("active")})}),document.querySelectorAll(".donate-btn").forEach(t=>{t.addEventListener("click",s=>{const i=parseInt(s.target.dataset.amount);this.buyDonation(i)})})}initAudio(){this.sounds={click:null,purchase:null,upgrade:null}}bindEvents(){this.planetEarth.addEventListener("click",t=>this.clickPlanet(t)),this.settingsBtn.addEventListener("click",()=>this.openSettings()),this.mapBtn.addEventListener("click",()=>this.openMap()),this.shopBtn.addEventListener("click",()=>this.openShop()),this.friendsBtn.addEventListener("click",()=>this.openFriends()),document.getElementById("buy-click").addEventListener("click",()=>this.buyUpgrade("click")),document.getElementById("buy-auto").addEventListener("click",()=>this.buyUpgrade("auto")),this.bindMapPlanetEvents();const e=document.getElementById("sound-toggle"),n=document.getElementById("music-toggle");e&&e.addEventListener("change",t=>{this.soundEnabled=t.target.checked}),n&&n.addEventListener("change",t=>{this.musicEnabled=t.target.checked})}bindMapPlanetEvents(){document.querySelectorAll(".map-item.locked").forEach(n=>{n.addEventListener("click",t=>{if(t.target.closest(".close-btn"))return;const s=n.dataset.planet,i=parseInt(n.dataset.price);s&&!isNaN(i)&&this.buyPlanetFromMap(s,i)})})}clickPlanet(e){this.money+=this.clickValue,this.updateDisplay(),this.playSound("click");const n=document.createElement("div");n.className="click-effect",n.style.position="absolute",n.style.borderRadius="50%",n.style.border="2px solid rgba(255, 255, 255, 0.7)",n.style.pointerEvents="none",n.style.transform="translate(-50%, -50%)",n.style.animation="click-ripple 0.6s linear";const t=this.planetEarth.getBoundingClientRect(),s=e.clientX-t.left,i=e.clientY-t.top;n.style.left=s+"px",n.style.top=i+"px",this.planetEarth.appendChild(n),setTimeout(()=>{n.remove()},600),this.showMoneyPopup(e,this.clickValue)}showMoneyPopup(e,n){const t=document.createElement("div");t.className="money-popup",t.textContent=`+${n}`;const s=this.planetEarth.getBoundingClientRect(),i=e.clientX-s.left,o=e.clientY-s.top;t.style.left=i+"px",t.style.top=o+"px",t.style.position="absolute",this.planetEarth.appendChild(t),setTimeout(()=>{t.remove()},1e3)}changePlanet(e){this.currentPlanet=e;const n=this.planetEarth.querySelector(".planet-surface");n&&(n.style.backgroundImage=`url('/Plantes/Sun System/${this.capitalizeFirstLetter(e)}.png')`);const t=this.planetEarth.querySelector(".planet-glow");if(t)switch(e){case"mars":t.style.background="radial-gradient(circle, rgba(255, 100, 100, 0.3) 0%, transparent 70%)";break;case"jupiter":t.style.background="radial-gradient(circle, rgba(255, 150, 50, 0.3) 0%, transparent 70%)";break;case"sun":t.style.background="radial-gradient(circle, rgba(255, 200, 0, 0.5) 0%, transparent 70%)";break;case"earth":default:t.style.background="radial-gradient(circle, rgba(74, 144, 226, 0.3) 0%, transparent 70%)";break}}buyDonation(e){this.money>=e?(this.money-=e,this.showDonationEffect(),this.playSound("purchase"),this.updateDisplay(),console.log(`Donation of ${e} made successfully!`)):console.log(`Not enough money to donate. Need: ${e}, Have: ${this.money}`)}showDonationEffect(){const e=document.createElement("div");e.className="donation-effect",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="2000";for(let n=0;n<20;n++){const t=document.createElement("div");t.innerHTML="⭐",t.style.position="absolute",t.style.fontSize=`${Math.random()*20+10}px`,t.style.left=`${Math.random()*100}%`,t.style.top=`${Math.random()*100}%`,t.style.animation=`starAnimation ${Math.random()*2+1}s ease-out forwards`,t.style.opacity="0",e.appendChild(t)}document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}playSound(e){this.soundEnabled&&this.sounds[e]?console.log(`Playing sound: ${e}`):this.soundEnabled&&console.log(`Sound effect: ${e}`)}startAutoClicker(){setInterval(()=>{this.autoClickValue>0&&(this.money+=this.autoClickValue,this.updateDisplay())},1e3)}updateDisplay(){this.moneyDisplay.textContent=this.formatNumber(this.money),this.incomeDisplay.textContent=this.formatNumber(this.incomePerSecond)}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}openSettings(){this.showPanel("settings-panel")}openMap(){this.showPanel("map-panel")}openShop(){this.showPanel("shop-panel")}openFriends(){this.showPanel("friends-panel")}showPanel(e){const n=document.getElementById("overlay"),t=document.getElementById(e);n.classList.add("active"),t.classList.add("panel-visible"),n.onclick=()=>this.hideAllPanels();const s=t.querySelector(".close-btn");s.onclick=()=>this.hideAllPanels(),e==="map-panel"&&this.bindMapPlanetEvents()}hideAllPanels(){const e=document.getElementById("overlay"),n=document.querySelectorAll(".settings-panel, .map-panel, .shop-panel, .friends-panel");e.classList.remove("active"),n.forEach(t=>t.classList.remove("panel-visible"))}buyUpgrade(e){e==="click"&&this.money>=10?(this.money-=10,this.clickValue+=1,this.updateDisplay(),this.playSound("upgrade")):e==="auto"&&this.money>=50?(this.money-=50,this.autoClickValue+=1,this.incomePerSecond=this.autoClickValue,this.updateDisplay(),this.playSound("upgrade")):console.log(`Purchase failed for ${e}. Money: ${this.money}`)}buyPlanetFromMap(e,n){if(this.money>=n){this.money-=n;const t=document.querySelector(`.map-item.locked[data-planet="${e}"]`);if(t){t.classList.remove("locked");const s=t.querySelector(".map-status");s&&(s.textContent="Доступна",s.classList.remove("locked"),s.classList.add("active"))}this.changePlanet(e),this.playSound("purchase"),this.updateDisplay()}else console.log(`Not enough money to buy ${e}. Need: ${n}, Have: ${this.money}`)}}document.addEventListener("DOMContentLoaded",()=>{new c});
