(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();class a{constructor(){this.money=0,this.clickValue=1,this.autoClickValue=0,this.incomePerSecond=0,this.initElements(),this.bindEvents(),this.startAutoClicker(),this.updateDisplay()}initElements(){this.moneyDisplay=document.getElementById("money-amount"),this.incomeDisplay=document.getElementById("income-amount"),this.planetEarth=document.getElementById("planet-earth"),this.settingsBtn=document.getElementById("settings-btn"),this.mapBtn=document.getElementById("map-btn"),this.shopBtn=document.getElementById("shop-btn"),this.friendsBtn=document.getElementById("friends-btn")}bindEvents(){this.planetEarth.addEventListener("click",e=>this.clickPlanet(e)),this.settingsBtn.addEventListener("click",()=>this.openSettings()),this.mapBtn.addEventListener("click",()=>this.openMap()),this.shopBtn.addEventListener("click",()=>this.openShop()),this.friendsBtn.addEventListener("click",()=>this.openFriends()),document.getElementById("buy-click").addEventListener("click",()=>this.buyUpgrade("click")),document.getElementById("buy-auto").addEventListener("click",()=>this.buyUpgrade("auto")),this.bindMapPlanetEvents()}bindMapPlanetEvents(){document.querySelectorAll(".map-item.locked").forEach(n=>{n.addEventListener("click",s=>{if(s.target.closest(".close-btn"))return;const t=n.dataset.planet,i=parseInt(n.dataset.price);t&&!isNaN(i)&&this.buyPlanetFromMap(t,i)})})}clickPlanet(e){this.money+=this.clickValue,this.updateDisplay(),this.planetEarth.classList.add("planet-clicked"),setTimeout(()=>{this.planetEarth.classList.remove("planet-clicked")},200),this.showMoneyPopup(e,this.clickValue)}showMoneyPopup(e,n){const s=document.createElement("div");s.className="money-popup",s.textContent=`+${n}`;const t=this.planetEarth.getBoundingClientRect(),i=e.clientX-t.left,o=e.clientY-t.top;s.style.left=i+"px",s.style.top=o+"px",s.style.position="absolute",this.planetEarth.appendChild(s),setTimeout(()=>{s.remove()},1e3)}startAutoClicker(){setInterval(()=>{this.autoClickValue>0&&(this.money+=this.autoClickValue,this.updateDisplay())},1e3)}updateDisplay(){this.moneyDisplay.textContent=this.formatNumber(this.money),this.incomeDisplay.textContent=this.formatNumber(this.incomePerSecond)}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}openSettings(){this.showPanel("settings-panel")}openMap(){this.showPanel("map-panel")}openShop(){this.showPanel("shop-panel")}openFriends(){this.showPanel("friends-panel")}showPanel(e){const n=document.getElementById("overlay"),s=document.getElementById(e);n.classList.add("active"),s.classList.add("panel-visible"),n.onclick=()=>this.hideAllPanels();const t=s.querySelector(".close-btn");t.onclick=()=>this.hideAllPanels(),e==="map-panel"&&this.bindMapPlanetEvents()}hideAllPanels(){const e=document.getElementById("overlay"),n=document.querySelectorAll(".settings-panel, .map-panel, .shop-panel, .friends-panel");e.classList.remove("active"),n.forEach(s=>s.classList.remove("panel-visible"))}buyUpgrade(e){e==="click"&&this.money>=10?(this.money-=10,this.clickValue+=1,this.updateDisplay()):e==="auto"&&this.money>=50?(this.money-=50,this.autoClickValue+=1,this.incomePerSecond=this.autoClickValue,this.updateDisplay()):console.log(`Purchase failed for ${e}. Money: ${this.money}`)}buyPlanetFromMap(e,n){if(this.money>=n){this.money-=n;const s=document.querySelector(`.map-item.locked[data-planet="${e}"]`);if(s){s.classList.remove("locked");const t=s.querySelector(".map-status");t&&(t.textContent="Доступна",t.classList.remove("locked"),t.classList.add("active"))}this.updateDisplay()}else console.log(`Not enough money to buy ${e}. Need: ${n}, Have: ${this.money}`)}}document.addEventListener("DOMContentLoaded",()=>{new a});
