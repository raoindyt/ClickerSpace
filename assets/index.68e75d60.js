(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();class c{constructor(){this.money=0,this.clickValue=1,this.baseAutoClickValue=0,this.autoClickValue=this.baseAutoClickValue,this.incomePerSecond=0,this.currentPlanet="earth",this.soundEnabled=!0,this.musicEnabled=!0,this.isAdBoostActive=!1,this.adBoostTimeout=null,this.initAudio(),this.initElements(),this.bindEvents(),this.initTabs(),this.startAutoClicker(),this.updateDisplay()}initElements(){this.moneyDisplay=document.getElementById("money-amount"),this.incomeDisplay=document.getElementById("income-amount"),this.planetEarth=document.getElementById("planet-earth"),this.settingsBtn=document.getElementById("settings-btn"),this.mapBtn=document.getElementById("map-btn"),this.shopBtn=document.getElementById("shop-btn"),this.friendsBtn=document.getElementById("friends-btn")}initTabs(){const t=document.querySelectorAll(".shop-tab");t.forEach(s=>{s.addEventListener("click",()=>{const o=s.dataset.tab;t.forEach(i=>i.classList.remove("active")),s.classList.add("active"),document.querySelectorAll(".shop-tab-content").forEach(i=>i.classList.remove("active"));const a=document.getElementById(`${o}-tab`);a&&a.classList.add("active")})}),document.querySelectorAll(".donate-btn").forEach(s=>{s.addEventListener("click",o=>{const n=parseInt(o.target.dataset.amount);this.buyDonation(n)})})}initAudio(){this.sounds={click:null,purchase:null,upgrade:null}}bindEvents(){this.planetEarth.addEventListener("click",o=>this.clickPlanet(o)),this.settingsBtn.addEventListener("click",()=>this.openSettings()),this.mapBtn.addEventListener("click",()=>this.openMap()),this.shopBtn.addEventListener("click",()=>this.openShop()),this.friendsBtn.addEventListener("click",()=>this.openFriends()),document.getElementById("buy-click").addEventListener("click",()=>this.buyUpgrade("click")),document.getElementById("buy-auto").addEventListener("click",()=>this.buyUpgrade("auto")),this.bindMapPlanetEvents();const t=document.getElementById("watch-ad-btn");t&&t.addEventListener("click",()=>this.watchAd());const e=document.getElementById("sound-toggle"),s=document.getElementById("music-toggle");e&&e.addEventListener("change",o=>{this.soundEnabled=o.target.checked}),s&&s.addEventListener("change",o=>{this.musicEnabled=o.target.checked})}bindMapPlanetEvents(){document.querySelectorAll(".map-item.locked").forEach(e=>{e.addEventListener("click",s=>{if(s.target.closest(".close-btn"))return;const o=e.dataset.planet,n=parseInt(e.dataset.price);o&&!isNaN(n)&&this.buyPlanetFromMap(o,n)})})}clickPlanet(t){this.money+=this.clickValue,this.updateDisplay(),this.playSound("click");const e=document.createElement("div");e.className="click-effect",e.style.position="absolute",e.style.borderRadius="50%",e.style.border="2px solid rgba(255, 255, 255, 0.7)",e.style.pointerEvents="none",e.style.transform="translate(-50%, -50%)",e.style.animation="click-ripple 0.6s linear";const s=this.planetEarth.getBoundingClientRect(),o=t.clientX-s.left,n=t.clientY-s.top;e.style.left=o+"px",e.style.top=n+"px",this.planetEarth.appendChild(e),setTimeout(()=>{e.remove()},600),this.showMoneyPopup(t,this.clickValue)}showMoneyPopup(t,e){const s=document.createElement("div");s.className="money-popup",s.textContent=`+${e}`;const o=this.planetEarth.getBoundingClientRect(),n=t.clientX-o.left,a=t.clientY-o.top;s.style.left=n+"px",s.style.top=a+"px",s.style.position="absolute",this.planetEarth.appendChild(s),setTimeout(()=>{s.remove()},1e3)}changePlanet(t){this.currentPlanet=t;const e=this.planetEarth.querySelector(".planet-surface");e&&(e.style.backgroundImage=`url('/public/Plantes/Sun System/${this.capitalizeFirstLetter(t)}.png')`);const s=this.planetEarth.querySelector(".planet-glow");if(s)switch(t){case"mars":s.style.background="radial-gradient(circle, rgba(255, 100, 100, 0.3) 0%, transparent 70%)";break;case"jupiter":s.style.background="radial-gradient(circle, rgba(255, 150, 50, 0.3) 0%, transparent 70%)";break;case"sun":s.style.background="radial-gradient(circle, rgba(255, 200, 0, 0.5) 0%, transparent 70%)";break;case"earth":default:s.style.background="radial-gradient(circle, rgba(74, 144, 226, 0.3) 0%, transparent 70%)";break}}watchAd(){const t=document.getElementById("watch-ad-btn");t&&(t.disabled=!0,t.textContent="Загрузка..."),typeof show_9701900<"u"?show_9701900({type:"preload",ymid:"ad-boost-"+Date.now()}).then(()=>show_9701900({ymid:"ad-boost-"+Date.now()})).then(()=>{this.applyAdBoost(),t&&(t.disabled=!1,t.textContent="Смотреть рекламу"),console.log("Ad watched successfully")}).catch(e=>{console.log("Ad failed or was skipped",e),t&&(t.disabled=!1,t.textContent="Смотреть рекламу"),alert("Не удалось показать рекламу. Попробуйте позже.")}):(console.log("SDK not available, simulating ad watch"),setTimeout(()=>{this.applyAdBoost(),t&&(t.disabled=!1,t.textContent="Смотреть рекламу")},1e3))}applyAdBoost(){this.adBoostTimeout&&clearTimeout(this.adBoostTimeout),this.isAdBoostActive=!0,this.updateBoostState(),console.log(`Ad boost applied. Base: ${this.baseAutoClickValue}, Current: ${this.autoClickValue}`),this.updateDisplay(),this.showBoostEffect(),this.adBoostTimeout=setTimeout(()=>{this.isAdBoostActive=!1,this.updateBoostState(),console.log(`Ad boost expired. Base: ${this.baseAutoClickValue}, Current: ${this.autoClickValue}`),this.updateDisplay(),this.showBoostEndEffect()},3e4)}showBoostEffect(){const t=document.createElement("div");t.textContent="2x БУСТ АКТИВИРОВАН!",t.style.position="fixed",t.style.top="20px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.backgroundColor="#4CAF50",t.style.color="white",t.style.padding="10px 20px",t.style.borderRadius="20px",t.style.zIndex="10000",t.style.fontWeight="bold",t.style.boxShadow="0 4px 15px rgba(76, 175, 80, 0.4)",t.style.animation="boostEffect 3s ease-out forwards";const e=document.createElement("style");e.textContent=`
            @keyframes boostEffect {
                0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                10% { opacity: 1; transform: translateX(-50%) translateY(0); }
                90% { opacity: 1; transform: translateX(-50%) translateY(0); }
                100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            }
        `,document.head.appendChild(e),document.body.appendChild(t),setTimeout(()=>{t.remove(),e.remove()},3e3)}showBoostEndEffect(){const t=document.createElement("div");t.textContent="Буст закончился",t.style.position="fixed",t.style.top="20px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.backgroundColor="#f44336",t.style.color="white",t.style.padding="10px 20px",t.style.borderRadius="20px",t.style.zIndex="10000",t.style.fontWeight="bold",t.style.boxShadow="0 4px 15px rgba(244, 67, 54, 0.4)",t.style.animation="boostEndEffect 3s ease-out forwards";const e=document.createElement("style");e.textContent=`
            @keyframes boostEndEffect {
                0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                10% { opacity: 1; transform: translateX(-50%) translateY(0); }
                90% { opacity: 1; transform: translateX(-50%) translateY(0); }
                100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            }
        `,document.head.appendChild(e),document.body.appendChild(t),setTimeout(()=>{t.remove(),e.parentNode&&e.parentNode.removeChild(e)},3e3)}updateBoostState(){this.autoClickValue=this.isAdBoostActive?this.baseAutoClickValue*2:this.baseAutoClickValue}buyDonation(t){this.money>=t?(this.money-=t,this.showDonationEffect(),this.playSound("purchase"),this.updateDisplay(),console.log(`Donation of ${t} made successfully!`)):console.log(`Not enough money to donate. Need: ${t}, Have: ${this.money}`)}showDonationEffect(){const t=document.createElement("div");t.className="donation-effect",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="2000";for(let e=0;e<20;e++){const s=document.createElement("div");s.innerHTML="⭐",s.style.position="absolute",s.style.fontSize=`${Math.random()*20+10}px`,s.style.left=`${Math.random()*100}%`,s.style.top=`${Math.random()*100}%`,s.style.animation=`starAnimation ${Math.random()*2+1}s ease-out forwards`,s.style.opacity="0",t.appendChild(s)}document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}playSound(t){this.soundEnabled&&this.sounds[t]?console.log(`Playing sound: ${t}`):this.soundEnabled&&console.log(`Sound effect: ${t}`)}startAutoClicker(){setInterval(()=>{this.autoClickValue>0&&(this.money+=this.autoClickValue,this.updateDisplay())},1e3)}updateDisplay(){this.moneyDisplay.textContent=this.formatNumber(this.money),this.incomeDisplay.textContent=this.formatNumber(this.autoClickValue),this.isAdBoostActive?(this.incomeDisplay.textContent=this.formatNumber(this.autoClickValue)+" (2x)",this.incomeDisplay.style.color="#4CAF50",this.incomeDisplay.style.fontWeight="bold"):(this.incomeDisplay.style.color="#4CAF50",this.incomeDisplay.style.fontWeight="normal")}formatNumber(t){return t>=1e9?(t/1e9).toFixed(1)+"B":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}openSettings(){this.showPanel("settings-panel")}openMap(){this.showPanel("map-panel")}openShop(){this.showPanel("shop-panel")}openFriends(){this.showPanel("friends-panel")}showPanel(t){const e=document.getElementById("overlay"),s=document.getElementById(t);e.classList.add("active"),s.classList.add("panel-visible"),e.onclick=()=>this.hideAllPanels();const o=s.querySelector(".close-btn");o.onclick=()=>this.hideAllPanels(),t==="map-panel"&&this.bindMapPlanetEvents()}hideAllPanels(){const t=document.getElementById("overlay"),e=document.querySelectorAll(".settings-panel, .map-panel, .shop-panel, .friends-panel");t.classList.remove("active"),e.forEach(s=>s.classList.remove("panel-visible"))}buyUpgrade(t){t==="click"&&this.money>=10?(this.money-=10,this.clickValue+=1,this.updateDisplay(),this.playSound("upgrade")):t==="auto"&&this.money>=50?(this.money-=50,this.baseAutoClickValue+=1,this.updateBoostState(),console.log(`Auto upgrade purchased. Base: ${this.baseAutoClickValue}, Current: ${this.autoClickValue}, Boost active: ${this.isAdBoostActive}`),this.incomePerSecond=this.autoClickValue,this.updateDisplay(),this.playSound("upgrade")):console.log(`Purchase failed for ${t}. Money: ${this.money}`)}buyPlanetFromMap(t,e){if(this.money>=e){this.money-=e;const s=document.querySelector(`.map-item.locked[data-planet="${t}"]`);if(s){s.classList.remove("locked");const o=s.querySelector(".map-status");o&&(o.textContent="Доступна",o.classList.remove("locked"),o.classList.add("active"))}this.changePlanet(t),this.playSound("purchase"),this.updateDisplay()}else console.log(`Not enough money to buy ${t}. Need: ${e}, Have: ${this.money}`)}}document.addEventListener("DOMContentLoaded",()=>{new c});
