const l="planet-clicker-v1.0.0",r=["/","/index.html","/src/script.js","/src/styles/style.css","/src/styles/icons.css","/src/modules/TelegramSDK.js","/src/modules/ReferralSystem.js","/src/modules/PlanetSystem.js","/src/modules/BoostSystem.js","/src/modules/SoundSystem.js","/src/utils/ImageLoader.js","./Plantes/Sun System/Earth.png","./Plantes/Sun System/Mars.png","./Plantes/Sun System/Jupiter.png","./Plantes/Sun System/sun.png"];self.addEventListener("install",e=>{console.log("Service Worker installing..."),e.waitUntil(caches.open(l).then(s=>(console.log("Caching static assets"),s.addAll(r))).then(()=>(console.log("Service Worker installed successfully"),self.skipWaiting())).catch(s=>{console.error("Service Worker installation failed:",s)}))});self.addEventListener("activate",e=>{console.log("Service Worker activating..."),e.waitUntil(caches.keys().then(s=>Promise.all(s.map(t=>{if(t!==l)return console.log("Deleting old cache:",t),caches.delete(t)}))).then(()=>(console.log("Service Worker activated successfully"),self.clients.claim())))});self.addEventListener("fetch",e=>{e.request.url.includes("telegram.org")||e.request.url.includes("chrome-extension")||!e.request.url.startsWith(self.location.origin)||e.respondWith(caches.match(e.request).then(s=>s||fetch(e.request).then(t=>{if(!t||t.status!==200||t.type!=="basic")return t;const n=t.clone();return caches.open(l).then(i=>{i.put(e.request,n)}),t}).catch(()=>{if(e.request.destination==="document")return caches.match("/index.html")})))});self.addEventListener("message",e=>{e.data&&e.data.type==="SKIP_WAITING"&&self.skipWaiting()});self.addEventListener("notificationclick",e=>{console.log("Notification clicked:",e.notification.tag),e.notification.close(),e.waitUntil(clients.openWindow("/"))});console.log("Planet Clicker Service Worker loaded");
